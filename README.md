# TP07 - Quality Assurance: Manual de Uso

**Alumno:** Octavio Carpineti - Kevin Massholder 
**Materia:** Ingenier√≠a de Software III  
**Fecha:** Octubre 2025

---

## üìã Tabla de Contenidos

1. [Descripci√≥n del Proyecto](#descripci√≥n-del-proyecto)
2. [Requisitos Previos](#requisitos-previos)
3. [Instalaci√≥n](#instalaci√≥n)
4. [Ejecuci√≥n del Proyecto](#ejecuci√≥n-del-proyecto)
5. [Ejecuci√≥n de Tests](#ejecuci√≥n-de-tests)
6. [Herramientas de Calidad](#herramientas-de-calidad)
7. [Pipeline CI/CD](#pipeline-cicd)
8. [Estructura del Proyecto](#estructura-del-proyecto)

---

## üìñ Descripci√≥n del Proyecto

Mini red social desarrollada con React (frontend) y Go (backend) que implementa:

- Registro y autenticaci√≥n de usuarios
- Creaci√≥n, visualizaci√≥n y eliminaci√≥n de posts
- Sistema de comentarios en posts
- Validaciones de permisos (solo el autor puede eliminar su contenido)

**Stack Tecnol√≥gico:**
- **Backend:** Go 1.24 + SQLite
- **Frontend:** React 18 + TypeScript
- **Testing:** Go testing + Jest + Cypress
- **CI/CD:** GitHub Actions + SonarCloud

---

## üîß Requisitos Previos

### Software Necesario

```bash
# Verificar versiones instaladas:
go version    # Debe ser 1.24 o superior
node --version # Debe ser 20 o superior
npm --version  # Debe ser 10 o superior
```

### Instalaci√≥n de Dependencias (si no las ten√©s)

**Go:**
```bash
# macOS
brew install go

# Ubuntu/Debian
sudo apt install golang-go

# Windows
# Descargar desde: https://go.dev/dl/
```

**Node.js y npm:**
```bash
# macOS
brew install node

# Ubuntu/Debian
curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -
sudo apt-get install -y nodejs

# Windows
# Descargar desde: https://nodejs.org/
```

---

## üì• Instalaci√≥n

### 1. Clonar el Repositorio

```bash
git clone https://github.com/OctavioCarpineti/IngSWIII-TP07-Quality.git
cd IngSWIII-TP07-Quality
```

### 2. Instalar Dependencias del Backend

```bash
cd backend
go mod download
cd ..
```

### 3. Instalar Dependencias del Frontend

```bash
cd frontend
npm install
cd ..
```

---

## üöÄ Ejecuci√≥n del Proyecto

### Opci√≥n 1: Ejecuci√≥n Manual (Recomendado para desarrollo)

**Terminal 1 - Backend:**
```bash
cd backend
go run cmd/api/main.go
```

El backend estar√° corriendo en `http://localhost:8080`

Deber√≠as ver:
```
üöÄ Servidor corriendo en http://localhost:8080
üìä Base de datos inicializada
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm start
```

El frontend estar√° corriendo en `http://localhost:3000`

Se abrir√° autom√°ticamente en tu navegador.

### Opci√≥n 2: Ejecuci√≥n con Scripts

**Backend:**
```bash
cd backend
# Compilar
go build -o app cmd/api/main.go

# Ejecutar
./app
```

**Frontend:**
```bash
cd frontend
# Build de producci√≥n
npm run build

# Servir build (requiere serve instalado: npm install -g serve)
serve -s build -l 3000
```

---

## üß™ Ejecuci√≥n de Tests

### Tests Unitarios - Backend

```bash
cd backend

# Ejecutar todos los tests
go test ./tests/services/... -v

# Ejecutar tests con coverage
go test ./tests/services/... -v -cover -coverpkg=./internal/services/...

# Generar reporte HTML de coverage
go test ./tests/services/... -coverprofile=coverage.out -coverpkg=./internal/services/...
go tool cover -html=coverage.out

# Ver coverage en terminal
go tool cover -func=coverage.out
```

**Resultado esperado:**
```
=== RUN   TestRegister_Success
--- PASS: TestRegister_Success (0.00s)
...
PASS
coverage: 86.5% of statements in ./internal/services
ok      tp06-testing/tests/services     0.537s
```

### Tests Unitarios - Frontend

```bash
cd frontend

# Ejecutar tests en modo watch
npm test

# Ejecutar tests una vez
npm test -- --watchAll=false

# Ejecutar tests con coverage
npm test -- --coverage --watchAll=false

# Ver reporte de coverage en navegador
open coverage/lcov-report/index.html
```

**Resultado esperado:**
```
Test Suites: 8 passed, 8 total
Tests:       39 passed, 39 total
Coverage:    92.44% statements
```

### Tests E2E - Cypress

**Prerequisito: Backend y Frontend deben estar corriendo**

```bash
# Terminal 1: Backend
cd backend
go run cmd/api/main.go

# Terminal 2: Frontend  
cd frontend
npm start

# Terminal 3: Cypress
cd frontend

# Modo interactivo (recomendado)
npx cypress open
# Luego click en "E2E Testing" y seleccionar los tests

# Modo headless (para CI/CD)
npx cypress run
```

**Resultado esperado:**
```
Running:  auth.cy.js                    (1 of 4)
  ‚úì 5 tests passing

Running:  posts.cy.js                   (2 of 4)
  ‚úì 5 tests passing

Running:  comments.cy.js                (3 of 4)
  ‚úì 4 tests passing

Running:  full-flow.cy.js               (4 of 4)
  ‚úì 1 test passing

Total: 15 tests passing
```

---

## üîç Herramientas de Calidad

### 1. SonarCloud (An√°lisis Est√°tico)

**Acceso al proyecto:**
```
URL: https://sonarcloud.io/project/overview?id=OctavioCarpineti_IngSWIII-TP07-Quality
Organization: octaviocarpineti
```

**An√°lisis local (opcional):**
```bash
# Requiere configuraci√≥n de SONAR_TOKEN
docker run --rm \
  -e SONAR_HOST_URL="https://sonarcloud.io" \
  -e SONAR_TOKEN="tu-token" \
  -v "$(pwd):/usr/src" \
  sonarsource/sonar-scanner-cli
```

### 2. Code Coverage

**Backend:**
```bash
cd backend
go test ./tests/services/... -coverprofile=coverage.out -coverpkg=./internal/services/...

# Ver en terminal
go tool cover -func=coverage.out | grep total

# Ver en navegador
go tool cover -html=coverage.out
```

**Frontend:**
```bash
cd frontend
npm test -- --coverage --watchAll=false

# Abrir reporte HTML
open coverage/lcov-report/index.html
```

---

## üîÑ Pipeline CI/CD

### GitHub Actions

El proyecto est√° configurado con GitHub Actions que se ejecuta autom√°ticamente en cada push o pull request.

**Pipeline incluye:**
1. ‚úÖ Backend Tests (Go) + Coverage
2. ‚úÖ Frontend Tests (React) + Coverage
3. ‚úÖ SonarCloud Analysis
4. ‚úÖ Cypress E2E Tests
5. ‚úÖ Backend Build
6. ‚úÖ Frontend Build
7. ‚úÖ Quality Gate Summary

**Ver estado del pipeline:**
```
GitHub > Actions > CI/CD Pipeline
```

**Ejecutar pipeline manualmente:**
```bash
git commit --allow-empty -m "trigger pipeline"
git push
```

### Quality Gates Configurados

El pipeline **bloquear√°** el merge si:
- ‚ùå Backend coverage < 70%
- ‚ùå Frontend coverage < 70%
- ‚ùå SonarCloud Quality Gate falla
- ‚ùå Cualquier test unitario falla
- ‚ùå Cualquier test E2E falla

---

## üìÅ Estructura del Proyecto

```
tp07-quality/
‚îú‚îÄ‚îÄ backend/
‚îÇ   ‚îú‚îÄ‚îÄ cmd/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ api/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ main.go              # Entry point del servidor
‚îÇ   ‚îú‚îÄ‚îÄ internal/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ handlers/                # HTTP handlers (POST, GET, DELETE)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth_handler.go
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ post_handler.go
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ utils.go
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/                # L√≥gica de negocio (86.5% coverage)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth_service.go
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ post_service.go
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ repository/              # Acceso a datos (interfaz)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ user_repository.go
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ post_repository.go
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models/                  # Estructuras de datos
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ users.go
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ post.go
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ database/                # Configuraci√≥n BD
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ database.go
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ router/                  # Configuraci√≥n de rutas
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ router.go
‚îÇ   ‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/                # 35 tests unitarios
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth_service_test.go
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ post_service_test.go
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ mocks/                   # Mocks para testing
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ mock_user_repository.go
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ mock_post_repository.go
‚îÇ   ‚îú‚îÄ‚îÄ go.mod
‚îÇ   ‚îî‚îÄ‚îÄ go.sum
‚îÇ
‚îú‚îÄ‚îÄ frontend/
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/              # Componentes React (92.44% coverage)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Login/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Login.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Login.test.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Login.css
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PostList/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PostList.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PostList.test.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ PostList.css
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CreatePost/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PostDetail/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CommentList/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ CommentForm/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/                # Servicios HTTP
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ authService.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ authService.test.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ postService.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ postService.test.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ types/                   # Definiciones TypeScript
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ App.tsx                  # Componente principal
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.tsx                # Entry point
‚îÇ   ‚îú‚îÄ‚îÄ cypress/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ e2e/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ blog/                # 15 tests E2E
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ auth.cy.js       # 5 tests
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ posts.cy.js      # 5 tests
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ comments.cy.js   # 4 tests
‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ full-flow.cy.js  # 1 test
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ support/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ e2e.js
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ commands.js
‚îÇ   ‚îú‚îÄ‚îÄ cypress.config.js
‚îÇ   ‚îú‚îÄ‚îÄ package.json
‚îÇ   ‚îî‚îÄ‚îÄ package-lock.json
‚îÇ
‚îú‚îÄ‚îÄ .github/
‚îÇ   ‚îî‚îÄ‚îÄ workflows/
‚îÇ       ‚îî‚îÄ‚îÄ ci.yml                   # Pipeline CI/CD
‚îÇ
‚îú‚îÄ‚îÄ sonar-project.properties         # Configuraci√≥n SonarCloud
‚îú‚îÄ‚îÄ README.md                        # Este archivo
‚îî‚îÄ‚îÄ decisiones.md                    # Decisiones t√©cnicas y justificaciones
```

---

## üêõ Troubleshooting

### Backend no inicia

```bash
# Verificar puerto 8080 disponible
lsof -i :8080
# Si est√° ocupado, matar el proceso:
kill -9 <PID>

# Verificar Go instalado correctamente
go version

# Limpiar y reinstalar dependencias
cd backend
rm go.sum
go mod tidy
go mod download
```

### Frontend no inicia

```bash
# Verificar puerto 3000 disponible
lsof -i :3000

# Limpiar cache y reinstalar
cd frontend
rm -rf node_modules package-lock.json
npm install

# Si falla con errores de Cypress
npm install --save-dev cypress@13.15.2
```

### Tests de Cypress fallan

```bash
# Verificar que backend y frontend est√©n corriendo
curl http://localhost:8080/api/health
curl http://localhost:3000

# Limpiar cache de Cypress
npx cypress cache clear
npx cypress install

# Ejecutar con logs detallados
DEBUG=cypress:* npx cypress run
```

### Pipeline falla en GitHub Actions

```bash
# Verificar logs en:
# GitHub > Actions > Click en el run fallido

# Causas comunes:
# 1. package-lock.json desincronizado
cd frontend
rm package-lock.json
npm install
git add package-lock.json
git commit -m "fix: regenerar package-lock.json"
git push

# 2. Tests fallan localmente primero
# Ejecutar todos los tests localmente antes de push
```

---

## üìä M√©tricas Alcanzadas

| M√©trica | Objetivo | Resultado | Estado |
|---------|----------|-----------|--------|
| Backend Coverage | ‚â•70% | 86.5% | ‚úÖ |
| Frontend Coverage | ‚â•70% | 92.44% | ‚úÖ |
| Total Tests | - | 89 tests | ‚úÖ |
| SonarCloud Quality Gate | Pass | PASSED | ‚úÖ |
| Issues Resueltos | ‚â•3 | 47 issues | ‚úÖ |
| Duplications | <3% | 0.0% | ‚úÖ |

---



**Alumno:** Octavio Carpineti - Kevin Massholder 
**GitHub:** https://github.com/OctavioCarpineti  
**Repositorio:** https://github.com/OctavioCarpineti/IngSWIII-TP07-Quality